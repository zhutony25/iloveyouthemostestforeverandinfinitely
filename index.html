<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Will you be my Valentine?</title>

  <!-- Confetti library -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;800&family=Patrick+Hand&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg1: #ffc5d3;
      --bg2: #ffc5d3;
      --card: #ffffffcc;
      --yes: #ff6a96;
      --yesHover: #ff6a96;
      --line-height: 32px; /* Height of each line on the paper */
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100svh;
      display: grid;
      place-items: center;
      background: radial-gradient(circle at top, var(--bg2), var(--bg1));
      font-family: "Baloo 2", system-ui, sans-serif;
      overflow: hidden;
      padding: 16px;
    }

    /* FULL-SCREEN CONFETTI CANVAS */
    #confettiCanvas {
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
      z-index: 9999;
    }

    .card {
      width: min(720px, 92vw);
      padding: 26px 22px;
      background: var(--card);
      backdrop-filter: blur(10px);
      border-radius: 22px;
      text-align: center;
      box-shadow: 0 18px 60px rgba(0,0,0,.15);
    }

    .art {
      width: min(260px, 80vw);
      margin: 0 auto 20px;
      display: block;
      filter: drop-shadow(0 10px 14px rgba(0,0,0,.12));
    }

    h1 {
      font-weight: 800;
      letter-spacing: 0.3px;
      margin: 12px 0 18px;
      font-size: 50px;
    }

    .button-zone {
      position: relative;
      width: min(520px, 92%);
      height: 150px;
      margin: 0 auto;
      touch-action: none;
    }

    button {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      padding: 16px 24px;
      font-size: 18px;
      font-weight: 800;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      box-shadow: 0 10px 24px rgba(0,0,0,.14);
      user-select: none;
      -webkit-tap-highlight-color: transparent;
      transition: transform .12s ease, background .12s ease;
    }

    #yesBtn {
      left: 18%;
      background: var(--yes);
      color: #fff;
      z-index: 1;
    }
    #yesBtn:hover { background: var(--yesHover); }

    #noBtn {
      left: 62%;
      background: #e5e7eb;
      color: #111827;
      z-index: 1;
    }

    .hint {
      margin-top: 10px;
      font-size: 13px;
      opacity: .7;
      z-index: 0;
    }

    .result {
      display: none;
      margin-top: 18px;
      animation: pop .35s ease;
    }

    .result h2 {
      font-size: 100px;
      margin: 10px 0;
    }

    .fireworks {
      width: min(380px, 90vw);
      margin: 0 auto;
      display: block;
    }

    @keyframes pop {
      from { transform: scale(.96); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }
    .letter {
        text-align: left;
        margin-bottom: 10px;
        margin-left: 25px;
        margin-right: 25px;
        margin-bottom: 20px;
    }

    .letter p {
        margin: 6px 0;
        font-family: "Patrick Hand", cursive;
        font-style: italic;
        font-weight: 500;
        font-size: 28px;
    }

    /* POLAROID GRID COLLAGE */
    #collage {
      position: fixed;
      inset: 0;
      z-index: -1;
      overflow: hidden;
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      padding: 40px;
      align-content: center;
    }

    #collage img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      background: white;
      padding: 10px 10px 40px 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      border-radius: 4px;
      transform: rotate(var(--r));
      transition: transform 0.3s ease;
    }

    #collage img:hover {
      transform: rotate(0deg) scale(1.05);
      z-index: 10;
    }

    @media (max-width: 768px) {
      #collage {
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
        padding: 20px;
      }
      
      #collage img {
        height: 150px;
      }
    }

    #toggleBtn {
      position: fixed;
      top: 30px;             /* stick to top */
      right: 20px;           /* stick to right */
      padding: 8px 16px;     /* comfortable size */
      font: 600 14px system-ui, sans-serif;
      border-radius: 6px;    /* small rounded corners for rectangle */
      border: 2px solid var(--yes);
      background: rgba(255,255,255,0.9);
      color: var(--yes);
      cursor: pointer;
      box-shadow: 0 3px 8px rgba(0,0,0,0.15);
      transition: 0.3s;
      z-index: 1000;
    }

    #toggleBtn:hover {
      background: var(--yes);
      color: #fff;
    }



    /* SENTIMENTAL LETTER CARD */
    #letterCard {
      position: fixed;
      inset: 0;
      display: none;
      place-items: center;
      z-index: 10000;
      background: rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(8px);
      animation: fadeIn 0.4s ease;
    }

    #letterCard.show {
      display: grid;
    }

    .letter-content {
      width: min(600px, 90vw);
      max-height: 80vh;
      overflow-y: auto;
      background: #fef9f3;
      padding: 50px 40px;
      border-radius: 8px;
      box-shadow: 
        0 20px 60px rgba(0,0,0,0.3),
        inset 0 0 0 1px rgba(139, 90, 60, 0.1);
      position: relative;
      animation: slideUp 0.5s ease;
    }

    .letter-header {
      font-family: "Patrick Hand", cursive;
      font-size: 32px;
      color: var(--yes);
      margin-bottom: var(--line-height);
      text-align: center;
      line-height: var(--line-height);
    }

    .letter-body {
      font-family: "Patrick Hand", cursive;
      font-size: 20px;
      line-height: var(--line-height);
      color: #2d2d2d;
      margin-bottom: 0;
    }

    .letter-body p {
      margin: 0 0 var(--line-height) 0;
      line-height: var(--line-height);
    }

    .letter-signature {
      font-family: "Patrick Hand", cursive;
      font-size: 24px;
      text-align: right;
      color: #2d2d2d;
      margin-top: calc(var(--line-height) * 2);
      line-height: var(--line-height);
    }

    .close-letter {
      position: absolute;
      top: 50px; /* Lowered from 15px */
      right: 20px;
      background: rgba(255, 255, 255, 0.9);
      border: 2px solid #ddd;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      font-size: 24px;
      color: #666;
      cursor: pointer;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      line-height: 1;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .close-letter:hover {
      color: #fff;
      background: var(--yes);
      border-color: var(--yes);
      transform: scale(1.1);
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes slideUp {
      from { 
        transform: translateY(30px);
        opacity: 0;
      }
      to { 
        transform: translateY(0);
        opacity: 1;
      }
    }

    @media (max-width: 768px) {
      :root {
        --line-height: 28px;
      }

      .letter-content {
        padding: 40px 25px;
      }
      
      .letter-header {
        font-size: 28px;
      }
      
      .letter-body {
        font-size: 18px;
      }

      .close-letter {
        top: 35px;
        right: 15px;
        width: 32px;
        height: 32px;
        font-size: 20px;
      }
    }

  </style>
</head>

<body>
  <div id="collage"></div>

  <canvas id="confettiCanvas"></canvas>

  <!-- Toggle Button -->
  <button id="toggleBtn">View Collage</button>

  <!-- Sentimental Letter Card -->
  <div id="letterCard">
    <div class="letter-content">
      <button class="close-letter" onclick="document.getElementById('letterCard').classList.remove('show')">Ã—</button>
      <div class="letter-header">Dear Catherine,</div>
      <div class="letter-body">
        <p>Sorry for asking so late but wanted to do something different this year, especially since we're so far :((</p>
        
        <p>I know you've been really busy and I'm sure it's annoying to hear me glaze you when I don't know the circumstances, but I want to again say that I'm so so so proud of all the work you've been putting in. I've always admired how you high standards for yourself and I know you always strive for both your and the best; there has never been a millisecond where I've doubted your ability to succeed, and I know you'll find success up to your satisfaction sooner rather than later.</p>
        
        <p>Like every Valentines and note I write to you, I always wish you could see yourself the way I see you. You are so beautiful, in mind, body, and soul. Your ability to shift between silly joy and deep reflection, coupled with your emotional and technical intellect was what changed my life in 4th grade, and is what continues to be an inspiration for me 11-some years later. While I'm not there please ensure you're being kind and patient with yourself, taking care of your body and spirit, and of course, eating something good; you have been and will always be the strongest, most capable, and most humoured person I know.</p>
        
        <p>You're my best friend, partner, inspiration, and everything to me. I could write a million letters (or build 10 million websites) and I would still be unable to capture neither my love for you nor your beauty. One day I'll be asking you with flowers in hand, we'll go on a nice date with omakase, maybe even grab some dubai chocalate crumbl for desert. Until then, check back here and I'll keep adding to it <3</p>
        
        <p>Happy Valentines day my love! I hope you have a great time with friends, and I'll see you so soon ðŸ«¶</p>
      </div>
      <div class="letter-signature">
        Like this domain name says, I love you the mostest, forever and infinitely.<br>
        Tony
      </div>
      <div class="letter-body">
        <p>P.S. Let me know if you have access to Apple's UI team, want to make sure I can come up with some cool animations for 2027 ;)</p>
        
      </div>
    </div>
  </div>

  <main class="card" id="mainCard">
    <!-- Mocha -->
    <img
        class="art"
        src="MilkMocha.png"
        alt="Mocha"
    />

    <div class="letter">
        <p class="to">
            To Catherine Wang, my queen, best friend, beautiful girl, and amazing, talented, hardworking, compassionate, kind, caring, loving and sexy engineer girlfriend...
        </p>
    </div>



    <h1>Will you be my Valentine?</h1>

    <section class="button-zone" id="zone">
      <button id="yesBtn">Yes</button>
      <button id="noBtn">No</button>
    </section>

    <!-- HINT -->
    <div class="hint" id="hint">Plz don't say no :((</div>

    <section class="result" id="result">
      <h2>YAYYY!!!!</h2>
    </section>
  </main>

  <script>
    /* ---- Collage ---- */
    const collage = document.getElementById("collage");

    for (let i = 1; i <= 12; i++) {
      const img = document.createElement("img");
      img.src = `photo${i}.jpeg`;

      // Slight random rotation for polaroid effect
      img.style.setProperty("--r", `${Math.random() * 6 - 3}deg`);

      collage.appendChild(img);
    }



    const zone = document.getElementById("zone");
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const result = document.getElementById("result");
    const hint = document.getElementById("hint");

    /* ---------- CONFETTI ---------- */
    const confettiCanvas = document.getElementById("confettiCanvas");

    function resizeConfettiCanvas() {
      const dpr = Math.max(1, window.devicePixelRatio || 1);
      confettiCanvas.width = Math.floor(window.innerWidth * dpr);
      confettiCanvas.height = Math.floor(window.innerHeight * dpr);
      confettiCanvas.style.width = "100vw";
      confettiCanvas.style.height = "100vh";
    }

    resizeConfettiCanvas();
    window.addEventListener("resize", resizeConfettiCanvas);
    window.addEventListener("orientationchange", () => setTimeout(resizeConfettiCanvas, 150));

    const confettiInstance = confetti.create(confettiCanvas, {
      resize: false,
      useWorker: true
    });

    function fullScreenConfetti() {
    const end = Date.now() + 1800;

    (function frame() {
        confettiInstance({
        particleCount: 10,
        spread: 70,
        startVelocity: 25,
        gravity: 0.6,
        scalar: 1.3,
        shapes: ["heart"],
        colors: ["#ff4d7d", "#ff8fab", "#ffc2d1", "#ff1f68"],
        origin: {
            x: Math.random(),
            y: Math.random() * 0.3
        }
        });
        if (Date.now() < end) requestAnimationFrame(frame);
    })();
    }


    /* ---------- YES BUTTON GROWS ---------- */
    let yesScale = 1;
    function growYes() {
        yesScale += 0.5; // adjust speed here
        yesBtn.style.transform = `translateY(-50%) scale(${yesScale})`;
    }

    /* ---------- NO BUTTON RUNS AWAY ---------- */
    function clamp(n, min, max) {
      return Math.max(min, Math.min(max, n));
    }

    function moveNo(px, py) {
      const z = zone.getBoundingClientRect();
      const b = noBtn.getBoundingClientRect();

      let dx = (b.left + b.width / 2) - px;
      let dy = (b.top + b.height / 2) - py;
      let mag = Math.hypot(dx, dy) || 1;
      dx /= mag;
      dy /= mag;

      let newLeft = (b.left - z.left) + dx * 150;
      let newTop  = (b.top - z.top) + dy * 150;

      newLeft = clamp(newLeft, 0, z.width - b.width);
      newTop  = clamp(newTop, 0, z.height - b.height);

      noBtn.style.left = newLeft + "px";
      noBtn.style.top = newTop + "px";
      noBtn.style.transform = "none";

      growYes();
    }

    zone.addEventListener("pointermove", e => {
      const b = noBtn.getBoundingClientRect();
      const d = Math.hypot(
        (b.left + b.width / 2) - e.clientX,
        (b.top + b.height / 2) - e.clientY
      );
      if (d < 140) moveNo(e.clientX, e.clientY);
    });

    noBtn.addEventListener("click", e => e.preventDefault());

    /* ---------- YES CLICK ---------- */
    yesBtn.addEventListener("click", () => {
      zone.style.display = "none";
      hint.style.display = "none";     // HIDE THE HINT
      result.style.display = "block";
      resizeConfettiCanvas();
      fullScreenConfetti();
      
      // Show letter card after a short delay
      setTimeout(() => {
        document.getElementById('letterCard').classList.add('show');
      }, 2000);
    });

    /* ---------- TOGGLE CARD ---------- */
    const toggleBtn = document.getElementById('toggleBtn');
    const mainCard = document.getElementById('mainCard');
    let cardVisible = true;

    toggleBtn.addEventListener('click', () => {
      cardVisible = !cardVisible;
      if (cardVisible) {
        mainCard.style.display = 'block';
        toggleBtn.textContent = 'View Collage';
      } else {
        mainCard.style.display = 'none';
        toggleBtn.textContent = 'Show Card';
      }
    });
  </script>
</body>

</html>